
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>12. Using ltemplify.py to create an LT file &#8212; moltemplate 2.1 documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="13. Visualization in VMD" href="vmd_advanced.html" />
    <link rel="prev" title="11. Bonded interactions “By Type”" href="nbody_by_type.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="using-ltemplify-py-to-create-an-lt-file">
<span id="sec-ltemplify"></span><h1><span class="section-number">12. </span>Using ltemplify.py to create an <em>LT file</em><a class="headerlink" href="#using-ltemplify-py-to-create-an-lt-file" title="Permalink to this headline">¶</a></h1>
<p>The “ltemplify.py” script is used to convert LAMMPS data files and input
scripts into a single MOLTEMPLATE (“<strong>LT</strong>”) file.</p>
<p><strong>Typically</strong>, the LT files generated by “ltemplify.py” contain the
definition of a single type of molecule (or molecular complex) present
in the data file. This way, moltemplate users later on can build
complicated simulations using this molecule as a building block (perhaps
along with other molecules).</p>
<p>Users can select the molecule (or molecules) they want using the “-mol”,
“-id”, or “-type” arguments, and give the molecule a name using the
“-name” argument. (See below.) The resulting LT file will include all of
the information relevant to that molecule including atom types, charges,
coordinates, bonded interactions, force field parameters, force field
styles, groups, and fixes that effect the molecule. (Other information
will be omitted.)</p>
<p><em>However, by default</em>, “ltemplify.py” will copy all of the information
from these files into an LT file that describes the entire system.
<em>(Later, when moltemplate.sh is run on that LT file, it will try to
re-generate all of the original LAMMPS files.)</em> Normally, this is not
very useful.</p>
<div class="section" id="typical-usage">
<h2><span class="section-number">12.1. </span>Typical Usage<a class="headerlink" href="#typical-usage" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ltemplify</span><span class="o">.</span><span class="n">py</span> <span class="o">-</span><span class="n">name</span> <span class="n">MoleculeName</span> <span class="o">-</span><span class="n">mol</span> <span class="n">MolID</span> <span class="n">INPUT_SCRIPT</span> <span class="n">DATA_FILE</span> <span class="o">&gt;</span> <span class="n">FILE</span><span class="o">.</span><span class="n">lt</span>
</pre></div>
</div>
<p>…where <em>MoleculeName</em> is a string, <em>MolID</em> is an integer,
<em>INPUT_SCRIPT</em> and <em>DATA_FILE</em> are the names of a LAMMPS input script
and a data file containing the molecule of interest, and <em>FILE.lt</em> is
the resulting MOLTEMPLATE file created by ltemplify.py. (See section
<a class="reference internal" href="#sec-ltemplify-args-table"><span class="std std-ref">Optional arguments</span></a> for more information.)</p>
</div>
<div class="section" id="note-tiresome-details-to-follow">
<h2><span class="section-number">12.2. </span>Note: Tiresome details to follow.<a class="headerlink" href="#note-tiresome-details-to-follow" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="first-time-readers-should-probably-skip-to-the-examples-in-sectionsec-ltemplify-examples">
<span id="first-time-readers-should-probably-skip-to-the-examples-in-sectionsecltemplify-examples"></span><h2><span class="section-number">12.3. </span>First time readers should probably skip to the examples in section<a class="reference internal" href="#sec-ltemplify-examples"><span class="std std-ref">Examples</span></a>.<a class="headerlink" href="#first-time-readers-should-probably-skip-to-the-examples-in-sectionsec-ltemplify-examples" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="required-arguments">
<h2><span class="section-number">12.4. </span>Required arguments<a class="headerlink" href="#required-arguments" title="Permalink to this headline">¶</a></h2>
<p>“ltemplify.py” requires only one argument: the name of a LAMMPS data
file. However (as shown in the example above), it also reads LAMMPS
input scripts. <em>(Note: If LAMMPS input scripts are included, they must
appear</em><strong>before</strong><em>the DATA file in the argument list. See examples
below.)</em> “ltemplify.py” also accepts many arguments to select the atoms
belonging to the molecule of interest and customize the output.</p>
</div>
<div class="section" id="lammps-input-scripts">
<h2><span class="section-number">12.5. </span>LAMMPS input scripts<a class="headerlink" href="#lammps-input-scripts" title="Permalink to this headline">¶</a></h2>
<p>In addition to LAMMPS DATA files, users can also supply one or more
LAMMPS input scripts (typically containing information relevant to that
molecule, such as force field parameters and fixes). If LAMMPS input
scripts are included, they must appear <em>before</em> the DATA file in the
argument list. (See examples below.)</p>
</div>
<div class="section" id="optional-arguments">
<span id="sec-ltemplify-args-table"></span><h2><span class="section-number">12.6. </span>Optional arguments<a class="headerlink" href="#optional-arguments" title="Permalink to this headline">¶</a></h2>
<table class="docutils align-default">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>argument</strong></p></th>
<th class="head"><p><strong>meaning</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>-name <em>NAME</em></p></td>
<td><p>Specify the name of the molecule
described in the output file.
(The optional “inherits” keyword
can be used to select a force
field.)</p></td>
</tr>
<tr class="row-odd"><td><p>-atomstyle <em>style</em></p></td>
<td><p>Optional: Force ltemplify.py to
use a particular atom_style.
(Hybrid styles should be
surrounded by quotes, eg
<em>-atomstyle “hybrid full
dipole”</em>.)</p></td>
</tr>
<tr class="row-even"><td><p>-columns <em>“column_list”</em></p></td>
<td><p>For custom atom_styles, you can
list of column names in the
“Atoms” section manually. (For
example: <strong>-columns “molid x y z
atomid atomtype mux muy muz”</strong>)</p></td>
</tr>
<tr class="row-odd"><td><p>-mol <em>“molID_list”</em></p></td>
<td><p>Select the molecule you want to
appear in in the resulting LT
file. To select more than one
molecule, supply a list of
numbers surrounded by quotes.</p></td>
</tr>
<tr class="row-even"><td><p>-id <em>“id_list”</em></p></td>
<td><p>Select atoms by their atom-IDs.
Use quotes to surround the list
of atom ID numbers. Unselected
atoms will be omitted.</p></td>
</tr>
<tr class="row-odd"><td><p>-type <em>“type_list”</em></p></td>
<td><p>Select atoms by their types. Use
quotes to surround the list of
atom type numbers.</p></td>
</tr>
<tr class="row-even"><td><p>-datacoeffs</p></td>
<td><p>Put force field information in
the data file, not in an input
script. (By default, force field
parameters will be placed in the
“In Settings” section which will
eventually be written to a LAMMPS
input script.)</p></td>
</tr>
<tr class="row-odd"><td><p>-ignore-comments</p></td>
<td><p>Do not infer atom, bond, angle,
dihedral, and improper type names
from comments in the data file.</p></td>
</tr>
<tr class="row-even"><td><p>-ignore-coeffs</p></td>
<td><p>Ignore all force field parameters
(coeffs).</p></td>
</tr>
<tr class="row-odd"><td><p>-ignore-angles</p></td>
<td><p>Ignore angles, dihedrals and
impropers. Omit from output file.
(This is useful when using
external force fields, such as
OPLSAA.)|</p></td>
</tr>
<tr class="row-even"><td><p>-ignore-bond-types</p></td>
<td><p>Ignore the 2nd column in the
“Bonds” section of the LAMMPS
data file, and create a “Bond
List” section in the resulting
MOLTEMPLATE LT file which omits
the bond types. (This is useful
when using external force fields,
such as OPLSAA.)|</p></td>
</tr>
<tr class="row-odd"><td><p>-ignore-masses</p></td>
<td><p>Ignore all masses in the data
file. Omit from output file.
(This is useful when using
external force fields, such as
OPLSAA.)|</p></td>
</tr>
<tr class="row-even"><td><p>-prepend-atom-type <em>STR</em></p></td>
<td><p>prepend the string from the <em>STR</em>
argument to the beginning of all
atom type names.</p></td>
</tr>
</tbody>
</table>
<div class="section" id="examples-showing-argument-usage-are-included-in-section-sec-ltemplify-examples">
<span id="examples-showing-argument-usage-are-included-in-section-secltemplify-examples"></span><h3><span class="section-number">12.6.1. </span>Examples showing argument usage are included in section <a class="reference internal" href="#sec-ltemplify-examples"><span class="std std-ref">Examples</span></a>.<a class="headerlink" href="#examples-showing-argument-usage-are-included-in-section-sec-ltemplify-examples" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="default-behavior">
<h3><span class="section-number">12.6.2. </span>Default behavior<a class="headerlink" href="#default-behavior" title="Permalink to this headline">¶</a></h3>
<p><em>Note that by default (if the “-mol”, “-id”, or “-type” arguments are
omitted), “ltemplify.py” will copy</em><strong>all</strong><em>of the information from
the LAMMPS files into an LT file that describes the entire system.
Normally, this is not very useful.</em></p>
</div>
<div class="section" id="details">
<span id="details-1"></span><h3><span class="section-number">12.6.3. </span>Details<a class="headerlink" href="#details" title="Permalink to this headline">¶</a></h3>
<p>All atoms, bonds, angles, dihedrals, and impropers and their associated
types will be converted to moltemplate “$” or “&#64;” counter variables (and
the relevant portion of each file will be moved to sections with the
correct header names). Coefficients, atom styles, and most force-field
styles and settings <em>should</em> also be included in the resulting .LT file.
ltemplify.py also understands simple group commands (using “id”,
“molecule”, or “type” styles) and “fix shake” and “fix rigid” (untested
2019-9-03). However most other fixes, and complex group commands are not
understood. Those commands must be added to the resulting .LT file
manually. (See section <a class="reference external" href="#sec:ltemplify_limitations">12.5</a> for more
details.)</p>
</div>
</div>
<div class="section" id="fixes-and-groups">
<span id="sec-ltemplify-fix-group"></span><h2><span class="section-number">12.7. </span>Fixes and Groups<a class="headerlink" href="#fixes-and-groups" title="Permalink to this headline">¶</a></h2>
<p><em>ltemplify.py</em> has <em>limited</em> support for “fix” and “group” commands,
including “fix shake”, “fix rigid”, and “fix poems”. Other fixes must be
added manually to the file generated by ltemplify.py. (Such as fix
“restrain”, “bond/create”, “bond/break”, “bond/react”, “ttm”, etc…)</p>
<p>ltemplify.py can understand simple (static) “group” commands, and will
include them in the output file, if it can determine that they contain
any relevant atoms. (Fixes depending on irrelevant groups are also
deleted.)</p>
<p><em>Note: This feature has not been tested carefully. So please review all
of the group and fix commands generated by ltemplify.py to make sure
they refer to the correct atoms. And please report any bugs you find.
(-Andrew 2019-9-03)</em></p>
<div class="section" id="automatic-generation-of-atom-bond-angle-dihedral-improper-names">
<h3><span class="section-number">12.7.1. </span>Automatic generation of atom, bond, angle, dihedral, improper names<a class="headerlink" href="#automatic-generation-of-atom-bond-angle-dihedral-improper-names" title="Permalink to this headline">¶</a></h3>
<p>By default ltemplify.py generates atom, bond, angle, dihedral, and
improper, type names and id names automatically. This resultis in atoms
with types like “&#64;atom:type3”, and IDs like “$atom:type3_7” (I.e. the
7th atom of type 3.)</p>
</div>
<div class="section" id="inferring-atom-type-names-from-comments">
<h3><span class="section-number">12.7.2. </span>Inferring atom type names from comments<a class="headerlink" href="#inferring-atom-type-names-from-comments" title="Permalink to this headline">¶</a></h3>
<p><em>However,</em> ltemplify.py uses comments in the “Masses” section of the
LAMMPS DATA file (if present) to determine the name of each atom type.
Consider the following excerpt from a hypothetical data file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Masses</span>

<span class="mi">1</span> <span class="mf">12.01</span>  <span class="c1"># c3</span>
<span class="mi">2</span> <span class="mf">1.008</span>  <span class="c1"># h3</span>
<span class="mi">3</span> <span class="mf">1.008</span>  <span class="c1"># ho</span>
<span class="mi">4</span> <span class="mf">16.00</span>  <span class="c1"># oh</span>
</pre></div>
</div>
<p>This means atoms of types 1, 2, 3, and 4 will be referred to as
“&#64;atom:c3”, “&#64;atom:h3”, “&#64;atom:ho” and “&#64;atom:oh”, respectively in the
moltemplate (LT) file created by ltemplify.py.</p>
</div>
<div class="section" id="ignoring-comments">
<h3><span class="section-number">12.7.3. </span>Ignoring comments<a class="headerlink" href="#ignoring-comments" title="Permalink to this headline">¶</a></h3>
<p>The “<em>-ignore-comments</em>” argument will disable this behavior and assign
numeric names to the atom types in the usual way (eg “<em>&#64;atom:type1</em>”,
“<em>&#64;atom:type2</em>”, “<em>&#64;atom:type3</em>”, “<em>&#64;atom:type4</em>”).</p>
</div>
<div class="section" id="bond-angle-dihedral-and-improper-type-names">
<h3><span class="section-number">12.7.4. </span>Bond, Angle, Dihedral, and Improper type names<a class="headerlink" href="#bond-angle-dihedral-and-improper-type-names" title="Permalink to this headline">¶</a></h3>
<p>Similarly, by default, bonds and angles are automatically assigned to
type names like “&#64;bond:type4”, “&#64;angle:type7”.</p>
<p><em>However, if comments appear</em> directly following the line in the header
file “<em>N</em> bond types”, then these comments will be interpreted as a list
of bond type names (optionally preceded by an integer). (The same is
true of angle, dihedral, and improper type names.) Consider this excerpt
from a LAMMPS data file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">atom</span> <span class="n">types</span>
<span class="c1"># c3</span>
<span class="c1"># h3</span>

<span class="mi">2</span> <span class="n">bond</span> <span class="n">types</span>
<span class="c1"># CCethane</span>
<span class="c1"># c3_h3</span>

<span class="mi">2</span> <span class="n">angle</span> <span class="n">types</span>
<span class="c1"># c3_c3_h3</span>
<span class="c1"># h3_c3_h3</span>
</pre></div>
</div>
<p>In this example, bonds of type 1 and 2 will be referred to as
“&#64;bond:CCethane” and “&#64;bond:c3_h3” in the moltemplate file,
respectively. Similarly, angles of type 1 and 2 will be referred to as
“&#64;angle:c3_c3_h3” and “&#64;angle:h3_c3_h3”, respectively. (As in the
previos example, atoms of type 1 and 2 will be referred to as “&#64;atom:c3”
and “&#64;atom:h3” respectively. You can specify atom type strings <em>either</em>
here, or in the Masses section.)</p>
<p>(As before, the “<em>-ignore-comments</em>” argument will disable this
behavior.)</p>
<p>If you forget to add comments to the LAMMPS data file before running
<em>ltemplify.py</em>, you can always use a text-editor (or <em>sed</em>) to manually
find and replace all instances of “&#64;atom:type1” with something more
meaningful, like “&#64;atom:c3”, for example.</p>
</div>
</div>
<div class="section" id="force-fields">
<span id="sec-ltemplify-force-fields"></span><h2><span class="section-number">12.8. </span>Force fields<a class="headerlink" href="#force-fields" title="Permalink to this headline">¶</a></h2>
<p>Some data files contain a list of <em>angle, dihedral, or improper</em> bonded
interactions. If so, then by default <em>ltemplify.py</em> will include this
information in the moltemplate (LT) file that it creates. Sometimes,
data files lack this information.</p>
<p>Either way, force fields (including “OPLSAA”, “GAFF2”, and “COMPASS”),
contain rules for generating these interactions automatically. Hence,
users may intentionally wish to exclude this information from the
moltemplate files that ltemplify.py generates when this information is
contained in the force field they want to use. (They can do this using
the “-ignore-coeffs”, “-ignore-angles”, and “-ignore-bond-types”
arguments explained below.)</p>
<div class="section" id="using-the-inherits-keyword-to-specify-force-fields">
<h3><span class="section-number">12.8.1. </span>Using the inherits keyword to specify force fields<a class="headerlink" href="#using-the-inherits-keyword-to-specify-force-fields" title="Permalink to this headline">¶</a></h3>
<p>Moltemplate provides several different force fields to choose from (such
as OPLSAA, GAFF2, or COMPASS). In addition, users can create their own
custom force-fields. To use these force fields, you must specify the one
you want to use using the <em>-name</em> argument with the <em>inherits</em> keyword
(“<strong>-name</strong> “MOLECULE_NAME inherits FORCE_FIELD””) For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ltemplify</span><span class="o">.</span><span class="n">py</span> <span class="o">-</span><span class="n">name</span> <span class="s2">&quot;Ethane inherits GAFF2&quot;</span> \
             <span class="o">-</span><span class="n">ignore</span><span class="o">-</span><span class="n">coeffs</span> \
             <span class="n">ethane</span><span class="o">.</span><span class="n">data</span> <span class="o">&gt;</span> <span class="n">ethane</span><span class="o">.</span><span class="n">lt</span>
</pre></div>
</div>
<p>This will ask ltemplify.py to create a file defining molecule named
“Ethane”. Later when moltemplate is used to read this file, the “GAFF2”
force field will be used to generate angles, dihedrals and impropers,
and lookup their force field parameters.</p>
<p>In addition, after ltemplify.py is finished, the user must manually
insert the following line <em>at the beginning</em> of the file that
ltemplify.py created. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="s2">&quot;gaff2.lt&quot;</span>     <span class="c1">#&lt;-- define the GAFF2 force field</span>

<span class="c1"># --- the text below was generated by ltemplify.py ---</span>
<span class="n">Ethane</span> <span class="n">inherits</span> <span class="n">GAFF2</span> <span class="p">{</span>
  <span class="o">...</span>
<span class="p">}</span>
</pre></div>
</div>
<p>ltemplify.py does not do this for you. A list of available force fields
can be found in the “moltemplate/force_fields/” directory distributed
with moltemplate on github.</p>
</div>
<div class="section" id="ignore-coeffs">
<h3><span class="section-number">12.8.2. </span>-ignore-coeffs<a class="headerlink" href="#ignore-coeffs" title="Permalink to this headline">¶</a></h3>
<p>The optional “<em>-ignore-coeffs</em>” argument will force ltemplify.py to
ignore the force field parameters that it encountered in the user’s
input script or DATA file. The resulting LT file will omit this
information. If you plan to use a force field with this molecule, then
this information will be present in the force field you are using, so
there’s no need to include it in the resulting LT file you are creating
now. (Later when you run moltemplate.sh on the LT file that ltemplify.py
created, it will use the force field to lookup these force field
parameters.)</p>
</div>
<div class="section" id="ignore-angles">
<h3><span class="section-number">12.8.3. </span>-ignore-angles<a class="headerlink" href="#ignore-angles" title="Permalink to this headline">¶</a></h3>
<p>If the original DATA file has “Angles”, “Dihedrals”, or “Impropers”, you
can use the “<em>-ignore-angles</em>” argument if you want to force
ltemplify.py to ignore/remove those interactions from the LT file which
ltemplify creates. (Doing that will allow the force field rules to take
precedence later when we run moltemplate.sh on that file.)</p>
</div>
<div class="section" id="ignore-bond-types">
<h3><span class="section-number">12.8.4. </span>-ignore-bond-types<a class="headerlink" href="#ignore-bond-types" title="Permalink to this headline">¶</a></h3>
<p>Similarly, when using force-fields, you only need to specify a list of
<em>which pairs of atoms</em> are bonded together. The force-field will
determine the type and properties of each bond (eg, equilibrium rest
length, stiffness, etc…) according to atom type names and the force
field rules.</p>
<p>To do that, you must force <em>ltemplify.py</em> to ignore the existing bond
type information present in your data file using the
“<em>-ignore-bond-types</em>” argument. This will force ltemplify.py to ignore
the bond types in the (2nd column of the) “Bonds” section of the LAMMPS
data file that you provided. In this way, the bond type can be
determined later by moltemplate.sh in a way which is consistent with the
force field you selected.</p>
<p>See section
<a class="reference external" href="#sec:ltemplify_examples_force_fields">[sec:ltemplify_examples_force_fields]</a>
for examples.</p>
</div>
<div class="section" id="disclaimer">
<h3><span class="section-number">12.8.5. </span>Disclaimer<a class="headerlink" href="#disclaimer" title="Permalink to this headline">¶</a></h3>
<p><em>ltemplify.py is experimental software.</em> The lemplify.py script has
limited understanding of all of the features available in LAMMPS. Please
look over the resulting “.LT” file and check for errors. (If necessary,
convert any remaining atom, bond, angle, dihedral, or improper id or
type numbers to the corresponding $ or &#64; variables.) Some exotic pair
styles which have their own special syntax are not understood. These
coeffs must be converted manually. Support for “group” and “fix”
commands is also limited. (See section
<a class="reference external" href="#sec:ltemplify_fix_group">12.2</a>.) Please report errors in the
behavior of ltemplify.py.</p>
</div>
</div>
<div class="section" id="examples">
<span id="sec-ltemplify-examples"></span><h2><span class="section-number">12.9. </span>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h2>
<div class="section" id="example-1">
<h3><span class="section-number">12.9.1. </span>Example 1<a class="headerlink" href="#example-1" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ltemplify</span><span class="o">.</span><span class="n">py</span> <span class="o">-</span><span class="n">name</span> <span class="n">Ethane</span> <span class="o">-</span><span class="n">molid</span> <span class="s2">&quot;1&quot;</span> <span class="n">FILE</span><span class="o">.</span><span class="ow">in</span> <span class="n">FILE</span><span class="o">.</span><span class="n">data</span> <span class="o">&gt;</span> <span class="n">ethane</span><span class="o">.</span><span class="n">lt</span>
</pre></div>
</div>
<p>This example creates a new file (“ethane.lt”) containing a new type of
molecule (named “Ethane”), consisting of all the atoms whose molecule-ID
number equals 1. <em>(Presumabely, the first molecule in FILE.data is an
ethane molecule.)</em></p>
<p>ltemplify.py reads the atom coordinates and bonded interactions from
“FILE.data”. Other information relevant to that molecule (including the
atom_style, force-field styles and parameters, groups and fixes) are
read from “FILE.in” (which is presumabely a LAMMPS input script file).</p>
<p><em>(NOTE: Again, it is not necessary to include a LAMMPS input script in
the argument list. However important information is typically contained
in LAMMPS input script files, so if you have one, including it is
recommended. However a data file is enough.)</em></p>
<p>Note: Selecting atoms by molecule-ID only works if you are using one of
the “molecular” atom_styles (such as “atom_style full”). If you are
using a different atom_style (such as “atom_style angle” or “atom_style
bond”), you can select the atoms you want either by type or by id
number. (See below.)</p>
</div>
<div class="section" id="example-2">
<h3><span class="section-number">12.9.2. </span>Example 2<a class="headerlink" href="#example-2" title="Permalink to this headline">¶</a></h3>
<p>Sometimes, the information describing your molecule will divided into
multiple lammps input scripts. (For example, one input script may
contain various <em>style</em> commands. The next input script may contain
<em>coeff</em> commands.) In that case, these input scripts should appear in
the argument list <em>before the data file</em>, and in the order in which they
are read by LAMMPS.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ltemplify</span><span class="o">.</span><span class="n">py</span> <span class="o">-</span><span class="n">name</span> <span class="n">Ethane</span> \
             <span class="o">-</span><span class="n">molid</span> <span class="s2">&quot;1&quot;</span> \
             <span class="n">FILE1</span><span class="o">.</span><span class="ow">in</span> <span class="n">FILE2</span><span class="o">.</span><span class="ow">in</span> <span class="n">FILE</span><span class="o">.</span><span class="n">data</span> <span class="o">&gt;</span> <span class="n">ethane</span><span class="o">.</span><span class="n">lt</span>
</pre></div>
</div>
</div>
<div class="section" id="example-3">
<h3><span class="section-number">12.9.3. </span>Example 3<a class="headerlink" href="#example-3" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ltemplify</span><span class="o">.</span><span class="n">py</span> <span class="o">-</span><span class="n">name</span> <span class="n">Ethane</span> <span class="o">-</span><span class="n">molid</span> <span class="s2">&quot;1&quot;</span> \
             <span class="o">-</span><span class="nb">id</span> <span class="s2">&quot;13 14 15 61*69&quot;</span> \
             <span class="n">FILE</span><span class="o">.</span><span class="ow">in</span> <span class="n">FILE</span><span class="o">.</span><span class="n">data</span> <span class="o">&gt;</span> <span class="n">ethane</span><span class="o">.</span><span class="n">lt</span>
</pre></div>
</div>
<p>In this example, only atoms whose ids are 13, 14, 15, and 61 through 69
are included.</p>
</div>
<div class="section" id="example-4">
<h3><span class="section-number">12.9.4. </span>Example 4<a class="headerlink" href="#example-4" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ltemplify</span><span class="o">.</span><span class="n">py</span> <span class="o">-</span><span class="n">name</span> <span class="n">Ethane</span> \
             <span class="o">-</span><span class="n">atomtype</span> <span class="s2">&quot;1 2 3&quot;</span> \
             <span class="n">FILE</span><span class="o">.</span><span class="ow">in</span> <span class="n">FILE</span><span class="o">.</span><span class="n">data</span> <span class="o">&gt;</span> <span class="n">ethane</span><span class="o">.</span><span class="n">lt</span>
</pre></div>
</div>
<p>In this example, only atoms whose type is 1, 2, or 3 are included.</p>
</div>
<div class="section" id="example-5">
<h3><span class="section-number">12.9.5. </span>Example 5<a class="headerlink" href="#example-5" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ltemplify</span><span class="o">.</span><span class="n">py</span> <span class="o">-</span><span class="n">name</span> <span class="n">EntireSystem</span> <span class="n">FILE</span><span class="o">.</span><span class="ow">in</span> <span class="n">FILE</span><span class="o">.</span><span class="n">data</span> <span class="o">&gt;</span> <span class="n">entire_system</span><span class="o">.</span><span class="n">lt</span>
</pre></div>
</div>
<p>This creates a template for a new molecule object (named
“EntireSystem”), consisting of <strong>all</strong> the atoms in the lammps files you
included, and saves this data in a single LT file (“entire_system.lt”).
This file can be used with moltemplate.sh (and/or ttree.py) to define
large systems containing this molecule.</p>
<p>Note: Again, the input scripts (“FILE.in” in this example) should appear
before the data file (“FILE.data”) in the argument list.</p>
<p>[sec:ltemplify_examples_force_fields]</p>
<p>You can also use <em>ltemplify.py</em> to create molecules that use 3rd-party
force fields such as OPLSAA, GAFF2, COMPASS, ….</p>
</div>
<div class="section" id="example-6">
<h3><span class="section-number">12.9.6. </span>Example 6<a class="headerlink" href="#example-6" title="Permalink to this headline">¶</a></h3>
<p>This example demonstrates how to build a molecule using the “GAFF2”
force field. The following example extracts molecule 1 from “FILE.in”
and “FILE.data”.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># This example creates a new file, &quot;ethane.lt&quot;, which will contain the</span>
<span class="c1"># instructions for building a &quot;Ethane&quot; molecule using &quot;GAFF2&quot;. First</span>
<span class="c1"># specify which file contains the definition of the &quot;GAFF2&quot; force field:</span>

<span class="n">echo</span> <span class="s2">&quot;import gaff2.lt&quot;</span>  <span class="o">&gt;</span>  <span class="n">ethane</span><span class="o">.</span><span class="n">lt</span>

<span class="c1"># Then use ltemplify.py to extract information from FILE.in, FILE.data</span>

<span class="n">ltemplify</span><span class="o">.</span><span class="n">py</span> <span class="o">-</span><span class="n">name</span> <span class="s2">&quot;Ethane inherits GAFF2&quot;</span> \
             <span class="o">-</span><span class="n">molid</span> <span class="s2">&quot;1&quot;</span> \
             <span class="o">-</span><span class="n">ignore</span><span class="o">-</span><span class="n">angles</span> <span class="o">-</span><span class="n">ignore</span><span class="o">-</span><span class="n">bond</span><span class="o">-</span><span class="n">types</span> <span class="o">-</span><span class="n">ignore</span><span class="o">-</span><span class="n">coeffs</span> \
             <span class="n">FILE</span><span class="o">.</span><span class="ow">in</span> <span class="n">FILE</span><span class="o">.</span><span class="n">data</span> <span class="o">&gt;&gt;</span> <span class="n">ethane</span><span class="o">.</span><span class="n">lt</span>

<span class="c1"># Note: if you want to build a simulation containing these molecules,</span>
<span class="c1"># you will have to create a &quot;system.lt&quot; file which refers to &quot;ethane.lt&quot;</span>
<span class="c1"># and then run moltemplate.sh on this file.</span>
</pre></div>
</div>
<p>As mentioned earlier, comments in “file.data” will determine the name of
each atom type and <em>should match atom type names in the force field</em>.</p>
<p>In this example, the angle, dihedral, improper, and bond-type
information is stripped from the original file.data (and will be
generated later according the the rules defined in the “GAFF’2’ force
field). The name of the molecule (“Ethane inherits GAFF2”) includes a
reference to the force field (“GAFF2”) which will be used to lookup this
information. (Note: The “GAFF2” force field parameters are typically
defined in a file named “gaff2.lt”. Hence in this example we used “echo”
to insert a link to “gaff2.lt” at the beginning of the “ethane.lt” file
so that moltemplate.sh will know where to find them. Alternatively, this
could be done manually by the user.)</p>
</div>
</div>
<div class="section" id="known-bugs-and-limitations-ltemplify-py">
<span id="sec-ltemplify-limitations"></span><h2><span class="section-number">12.10. </span>Known bugs and limitations (ltemplify.py)<a class="headerlink" href="#known-bugs-and-limitations-ltemplify-py" title="Permalink to this headline">¶</a></h2>
<div class="section" id="exotic-styles-are-not-supported">
<span id="sec-ltemplify-limitations-pair"></span><h3><span class="section-number">12.10.1. </span>Exotic styles are not supported<a class="headerlink" href="#exotic-styles-are-not-supported" title="Permalink to this headline">¶</a></h3>
<p>ltemplify.py does <strong>not</strong> understand the syntax of exotic many-body
pair_styles such as tersoff, sw, meam, reax, dpd, edip, dipole,
lubricate, hbond/dreiding (even though these styles are supported by
moltemplate). After running ltemplify.py, the user must manually edit
the resulting “.lt” files. For example: ltemplify.py will not understand
wildcard characters (“*” characters) which typically appear in the
“pair_coeff” commands or “Pair Coeffs” section when using these
many-body pair styles. You will have to remove the extra lines
automatically generated by ltemplify.py and put the wildcard characters
back (eg “pair_coeff * * …”) manually. (Later the user may need to
run moltemplate using the appropriate “-a” command line args to make
sure the various atom types are assigned to the correct numbers. This is
usually needed in order to keep them consistent with the order of
parameters in the corresponding pair style’s input files. See section
<a class="reference internal" href="ttree_man_page.html#sec-manual-assignment"><span class="std std-ref">Manual variables assignment (“-a” or “-b”)</span></a>.) In addition, auxiliary atom types
(such as the “hydrogen” atom type required by hbond/dreiding) will not
even be parsed. If you are using the “hbond/dreiding” pair style, you
will have to manually specify the atom type for the hydrogen-atom
mediator in every “pair_coeff” command after running ltemplify.py</p>
</div>
<div class="section" id="wildcard-characters-expansion">
<h3><span class="section-number">12.10.2. </span>Wildcard characters (“*”) expansion<a class="headerlink" href="#wildcard-characters-expansion" title="Permalink to this headline">¶</a></h3>
<p>As explained in section <a class="reference internal" href="../main/limitations.html#sec-limitations"><span class="std std-ref">Known bugs and limitations</span></a>, moltemplate is often
confused whenever wildcard characters (“*” characters) appear inside
any of the the “coeff” commands (or “Coeff” sections of the data file).
So ltemplify.py attempts to remove these characters and expand these
commands, generating multiple lines of output, and listing each atom
type explicitly. (This is also done for bond types, angle types,
dihedral types, and improper types.) This may not be what you want. (For
example, this can be a problem if you are using a many-body pair style
which requires you to specify “* *” for the atom types, such as
<em>tersoff</em>, <em>eam</em>, or <em>sw</em>.)</p>
</div>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">moltemplate</a></h1>








<h3>Navigation</h3>
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../main/installation.html">2. Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../main/quick_reference.html">3. Quick reference <em>(skip on first reading)</em></a></li>
<li class="toctree-l1"><a class="reference internal" href="../main/tutorial.html">4. Introductory tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../main/overview.html">5. Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../main/coordinates.html">6. Object composition and coordinate generation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../main/arrays.html">7. Arrays, slices, and coordinate transformations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../main/custom_xform.html">8. Customizing molecule position and topology</a></li>
<li class="toctree-l1"><a class="reference internal" href="spce_example_robust.html">9. Portability: Using <em>LT files</em> for force-field storage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../main/limitations.html">10. Known bugs and limitations</a></li>
<li class="toctree-l1"><a class="reference internal" href="nbody_by_type.html">11. Bonded interactions “By Type”</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">12. Using ltemplify.py to create an <em>LT file</em></a><ul>
<li class="toctree-l2"><a class="reference internal" href="#typical-usage">12.1. Typical Usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="#note-tiresome-details-to-follow">12.2. Note: Tiresome details to follow.</a></li>
<li class="toctree-l2"><a class="reference internal" href="#first-time-readers-should-probably-skip-to-the-examples-in-sectionsec-ltemplify-examples">12.3. First time readers should probably skip to the examples in section<span class="xref std std-ref">sec:ltemplify_examples</span>.</a></li>
<li class="toctree-l2"><a class="reference internal" href="#required-arguments">12.4. Required arguments</a></li>
<li class="toctree-l2"><a class="reference internal" href="#lammps-input-scripts">12.5. LAMMPS input scripts</a></li>
<li class="toctree-l2"><a class="reference internal" href="#optional-arguments">12.6. Optional arguments</a></li>
<li class="toctree-l2"><a class="reference internal" href="#fixes-and-groups">12.7. Fixes and Groups</a></li>
<li class="toctree-l2"><a class="reference internal" href="#force-fields">12.8. Force fields</a></li>
<li class="toctree-l2"><a class="reference internal" href="#examples">12.9. Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="#known-bugs-and-limitations-ltemplify-py">12.10. Known bugs and limitations (ltemplify.py)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="vmd_advanced.html">13. Visualization in VMD</a></li>
<li class="toctree-l1"><a class="reference internal" href="ttree_man_page.html">14. Advanced moltemplate.sh Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="ttree.html">15. Using <em>lttree.py</em> or <em>ttree.py</em> directly</a></li>
<li class="toctree-l1"><a class="reference internal" href="nbody_by_type_utility.html">16. Using the <em>nbody_by_type.py</em> utility</a></li>
<li class="toctree-l1"><a class="reference internal" href="adv_variable_syntax.html">17. Variable syntax details</a></li>
<li class="toctree-l1"><a class="reference internal" href="../utils/dump2data.html">18. dump2data.py</a></li>
<li class="toctree-l1"><a class="reference internal" href="../utils/extract_lammps_data.html">19. extract_lammps_data.py</a></li>
<li class="toctree-l1"><a class="reference internal" href="../utils/genpoly_lt.html">20. genpoly_lt.py</a></li>
<li class="toctree-l1"><a class="reference internal" href="../utils/interpolate_curve.html">21. interpolate_curve.py</a></li>
<li class="toctree-l1"><a class="reference internal" href="../utils/ltemplify.html">22. ltemplify.py</a></li>
<li class="toctree-l1"><a class="reference internal" href="../utils/raw2data.html">23. raw2data.py</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
      <li>Previous: <a href="nbody_by_type.html" title="previous chapter"><span class="section-number">11. </span>Bonded interactions “By Type”</a></li>
      <li>Next: <a href="vmd_advanced.html" title="next chapter"><span class="section-number">13. </span>Visualization in VMD</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2020, Andrew Jewett.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.4.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/appendix/ltemplify.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>